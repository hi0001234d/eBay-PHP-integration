This is pulled out an existing project, you'll have to change / add some constants and other variables / config files to get it to work in your own project.  

Hopefully in the future I'll have time to add the config + modularize the code a bit